---
layout: post
title: "Internet not working on Amazon EC2 Ubuntu instance"
date: 2012-02-03T13:56:00+05:30
comments: false
categories:
 - linux
 - error
 - EC2
 - aws
---

<div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">After <a href="http://colorlessgem.blogspot.com/2012/01/ubuntu-micro-instance-on-amazon-ec2.html" target="_blank">launching</a> the EC2 instance, which used Ubuntu 11.10 32bit EBS AMI, I wasn't able to connect to the internet.<br /><blockquote class="tr_bq"><span style="background-color: #f7f7f7; font-family: verdana, arial, sans-serif; font-size: 12px; line-height: 18px; text-align: -webkit-auto;">ubuntu@ip-xx-xx-xx-xx:~$ ping google.com</span><br /><span style="background-color: #f7f7f7; font-family: verdana, arial, sans-serif; font-size: 12px; line-height: 18px; text-align: -webkit-auto;">PING google.com (74.125.113.103) 56(84) bytes of data.</span><br /><span style="background-color: #f7f7f7; font-family: verdana, arial, sans-serif; font-size: 12px; line-height: 18px; text-align: -webkit-auto;">^C</span><br /><span style="background-color: #f7f7f7; font-family: verdana, arial, sans-serif; font-size: 12px; line-height: 18px; text-align: -webkit-auto;">google.com ping statistics ---</span><br /><span style="background-color: #f7f7f7; font-family: verdana, arial, sans-serif; font-size: 12px; line-height: 18px; text-align: -webkit-auto;">311 packets transmitted, 0 received, 100% packet loss, time 310000ms</span></blockquote>The DNS was fine.<br />I checked the security group for that instance. HTTP inbound connections were allowed. So no problem there.<br />The /etc/resolv.conf file was also in order.<br /><blockquote class="tr_bq"><span style="background-color: #f7f7f7; font-family: verdana, arial, sans-serif; font-size: 12px; line-height: 18px; text-align: -webkit-auto;">ubuntu@ip-xx-xx-xx-xx:~$ cat /etc/resolv.conf</span><br /><span style="background-color: #f7f7f7; font-family: verdana, arial, sans-serif; font-size: 12px; line-height: 18px; text-align: -webkit-auto;">domain ec2.internal</span><br /><span style="background-color: #f7f7f7; font-family: verdana, arial, sans-serif; font-size: 12px; line-height: 18px; text-align: -webkit-auto;">search ec2.internal</span><br /><span style="background-color: #f7f7f7; font-family: verdana, arial, sans-serif; font-size: 12px; line-height: 18px; text-align: -webkit-auto;">nameserver 172.16.0.23</span></blockquote>Finally, I asked the AWS guys in the forum for help. [<a href="https://forums.aws.amazon.com/thread.jspa?messageID=316370" target="_blank">Thread</a>]<br />A simple suggestion solved my problem, though I have no clue why!<br /><br />All I had to do was stop the instance and then start it again. Just be careful that you have data backup before stopping the instance. As all your data on that instance will be lost unless you take a snapshot of the volume or have some other form of backup.<br /><br />In short, Stop/Start did the trick.<br /><blockquote class="tr_bq"></blockquote></div></div>
